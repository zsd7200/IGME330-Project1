<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<title>CHA LA</title>
	
	<script>
	"use strict";
	window.onload = init;
	let play, pause, audio, state;
	
	
	function init()
	{
		play = document.querySelector("#play"); 
		pause = document.querySelector("#pause");
		audio = document.querySelector("#audio");
		state = play.src.substr(-8).substr(0, 4); // result will be either Idle or Play
		console.log(state);
		
		//Starting the play music when the play button is pressed, and setting the state to "Play"
		play.onclick = function(e) {
			audio.play();
			state = "Play";
		};

		//Pausing the music when the pause button is pressed, and setting the state to "Idle"
		pause.onclick = function(e) {
			audio.pause();
			state = "Idle";
		};
		document.querySelector("#songSelector").onchange = musicChange;
		update();
	}

	function musicChange(e)
	{
		if(state == "Play")
		{
			audio.pause();
			state = "Idle";
		}
		audio.src = "media/" + e.target.value + ".mp3"; 
	}

	function update()
	{
		requestAnimationFrame(update);
		//Changing the state of the sprite based on the playing status
		if(state == "Play")
			play.src = "media/gokuPlay.png";
		else if (state == "Idle")
			play.src = "media/gokuIdle.png";

	}
	
	</script>
</head>
<body>

	<audio src="media/chala.mp3" id="audio"></audio>
	<label>Song:
			<select id="songSelector">
				<option value="chala" selected>Head Cha La</option>
				<option value="tank">Tank!</option>
				<option value="dmp">Digging My Potato</option>
			</select>
		</label>
	<img src="media/gokuIdle.png" id="play" />
	<button id="pause">Pause</button>
</body>
</html>